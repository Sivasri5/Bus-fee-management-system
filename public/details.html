<!DOCTYPE html>
<html>
<head>
    <title>Html CRUD with Pure JavaScript</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<style>
      body > table{
    width: 80%;
}

table{
    border-collapse: collapse;
}
table.list{
    width:100%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}
tr:nth-child(even),table.list thead>tr {
    background-color: #dddddd;
}

input[type=text], input[type=number] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    display: inline-block;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
}

input[type=submit]{
    width: 30%;
    background-color: #ddd;
    color: #000;
    padding: 14px 20px;
    margin: 8px 0;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

form div.form-action-buttons{
    text-align: right;
}

a{
    cursor: pointer;
    text-decoration: underline;
    color: #0000ee;
    margin-right: 4px;
}

label.validation-error{
    color:   red;
    margin-left: 5px;
}

.hide{
    display:none;
}

.receipt-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh; /* Adjust as needed */
}

</style>
<body>
    <div id="formContainer">
        <form onsubmit="event.preventDefault(); onFormSubmit();" autocomplete="off">
            <div>
                <label>Full Name*</label>
                <label class="validation-error hide" id="fullNameValidationError">This field is required.</label>
                <input type="text" name="fullName" id="fullName">
            </div>
            <div>
                <label>EMP Code</label>
                <input type="text" name="empCode" id="empCode">
            </div>
            <div>
                <label>Salary</label>
                <input type="text" name="salary" id="salary">
            </div>
            <div>
                <label>City</label>
                <input type="text" name="city" id="city">
            </div>
            <div class="form-action-buttons">
                <input type="submit" value="Submit">
            </div>
        </form>
    </div>
    <div id="receiptContainer" class="hide">
        <h2>Receipt</h2>
        <div id="receiptData"></div>
        <button onclick="downloadReceipt()">Download Receipt</button>
    </div>

    <script>
        // JavaScript code
        function onFormSubmit() {
            if (validate()) {
                var formData = readFormData();
                populateReceipt(formData);
                showReceipt();
                resetForm();
            }
        }

        function readFormData() {
            var formData = {};
            formData["fullName"] = document.getElementById("fullName").value;
            formData["empCode"] = document.getElementById("empCode").value;
            formData["salary"] = document.getElementById("salary").value;
            formData["city"] = document.getElementById("city").value;
            return formData;
        }

        function populateReceipt(formData) {
            var receiptData = document.getElementById("receiptData");
            receiptData.innerHTML = `
                <div class="receipt">
                    <div class="receipt-header">
                        <h2>Receipt</h2>
                    </div>
                    <div class="receipt-body">
                        <div class="receipt-info">
                            <p><strong>Full Name:</strong> ${formData.fullName}</p>
                            <p><strong>EMP Code:</strong> ${formData.empCode}</p>
                            <p><strong>Salary:</strong> ${formData.salary}</p>
                            <p><strong>City:</strong> ${formData.city}</p>
                        </div>
                        <div class="receipt-signature">
                            <p>${formData.fullName}</p>
                            <p>Signature</p>
                        </div>
                    </div>
                </div>`;
        }

        function showReceipt() {
            document.getElementById("formContainer").classList.add("hide");
            document.getElementById("receiptContainer").classList.remove("hide");
        }

        function resetForm() {
            document.getElementById("fullName").value = "";
            document.getElementById("empCode").value = "";
            document.getElementById("salary").value = "";
            document.getElementById("city").value = "";
        }

        function downloadReceipt() {
            var receiptData = document.getElementById("receiptData").innerHTML;

            // Create a new jsPDF instance
            var doc = new jsPDF();

            // Set the font size and add the receipt content as text to the PDF document
            doc.setFontSize(12);
            doc.html(receiptData, {
                callback: function (doc) {
                    doc.save("receipt.pdf");
                }
            });
        }
        function validate() {
            var isValid = true;
            if (document.getElementById("fullName").value == "") {
                isValid = false;
                document.getElementById("fullNameValidationError").classList.remove("hide");
            } else {
                isValid = true;
                if (!document.getElementById("fullNameValidationError").classList.contains("hide"))
                    document.getElementById("fullNameValidationError").classList.add("hide");
            }
            return isValid;
        }
    </script>
</body>
</html>
